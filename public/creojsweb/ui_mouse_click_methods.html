<head>

	<link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Quicksand" />
	<link rel="stylesheet" type="text/css" href="libs/css/pretty-json.css" />
	
	<script type="text/javascript" src="libs/jquery-3.3.1.min.js" ></script>
	<script type="text/javascript" src="libs/underscore-min.js" ></script>
	<script type="text/javascript" src="libs/backbone-min.js" ></script>
	<script type="text/javascript" src="libs/pretty-json-min.js" ></script>
	
	<link rel="stylesheet" href="creo.ui.min.css">
		
	<script src="creojs.js"></script>
	<script type="text/creojs" src="browser.creojs"></script>
	
	<style>
		body {font-family: "Trebuchet MS", Arial, Helvetica, sans-serif;}
	</style>
		
	<!-- Web.Link initialization tools -->
	<script src="weblink_initialization.js"></script>

	<!-- Side-by-side comparison tools -->
	<script src="compare_weblink_and_creojs.js"></script>

<script>
	function uiMsgDisplay(){
		var session = pfcGetCurrentSession ();
        var model = session.GetActiveModel();		
		var uiInput = pfcCreate("pfcMouseButton").MOUSE_BTN_LEFT;
							
		session.UIDisplayMessage("lights_example_msg.txt", "USER Too many lights", null);
		session.UIClearMessage();
		session.UIDisplayMessage("lights_example_msg.txt", "USER Try to delete", null);
		session.UIClearMessage();		
	}
	
	function pointAsArray (point) {
		return [point.Item(0), point.Item(1), point.Item(2)]
	}

	function uiPickMouseBox(){
		var startTime = new Date ()
		var session = pfcGetCurrentSession();        
		var location = pfcCreate("pfcPoint3D");
		location.Set(0, 200.0);
		location.Set(1, 200.0);
		location.Set(2, 0.0);
		
		var outline = session.UIPickMouseBox(location);
		
		var box = [pointAsArray (outline.Item(0)), pointAsArray (outline.Item(1))]
		printUIMouseBox (box, startTime)		
	}
	
	function uiNextMousePick(){
		var startTime = new Date ()
		var session = pfcGetCurrentSession();
		var uiInput = pfcCreate("pfcMouseButton").MOUSE_BTN_LEFT;
		var mouse = session.UIGetNextMousePick(uiInput);
		printUIMousePosition (pointAsArray (mouse.Position), startTime)
	}
	
	function uiCurrentMouseStatus(){
		var startTime = new Date ()
		var session = pfcGetCurrentSession();
		var mouse = session.UIGetCurrentMouseStatus(false);
		printUIMousePosition (pointAsArray (mouse.Position), startTime)
	}
	
	function printUIMouseBox(obj, startTime) {
		showExpandedObject ('UIMouseBox', obj) //, startTime)
	}
	
	function printUIMousePosition(obj, startTime) {
		showExpandedObject ('Mouse Position', obj) //, startTime)
	}

</script>

<script type="text/creojs" id="uiActions.js">
	
	function uiMsgDisplayCreoJS(){
		var session = pfcGetCurrentSession ();	
		var uiInput = pfcMouseButton.MOUSE_BTN_LEFT;
							
		session.UIDisplayMessage("lights_example_msg.txt", "USER Too many lights", null);
		session.UIClearMessage();
		session.UIDisplayMessage("lights_example_msg.txt", "USER Try to delete", null);
		session.UIClearMessage();				
	} 
	
	function uiPickMouseBoxCreoJS(){
		let session = pfcGetCurrentSession();
		var loc = new pfcPoint3D ()
		loc.x = 200.0
		loc.y = 200.0
		loc.z = 0.0
		const box = session.UIPickMouseBox(loc);
		if (box) {
			const start = box.get(0)
			const end = box.get(1)
			return [[start.x,start.y,start.z], [end.x,end.y,end.z]]
		}
		return null
	}	
	
	function uiNextMousePickCreoJS()
	{
		let session = pfcGetCurrentSession();
		let uiInput = pfcMouseButton.MOUSE_BTN_LEFT;
		let mouse = session.UIGetNextMousePick(uiInput);
		const pos = mouse.Position
		return [pos.x, pos.y, pos.z];
	}
	
	function uiCurrentMouseStatusCreoJS()
	{
		let session = pfcGetCurrentSession();
		let mouse = session.UIGetCurrentMouseStatus(false);
		const pos = mouse.Position
		return [pos.x, pos.y, pos.z];
	}
</script>

</head>

<body onload="initCompareOutputArea (TEST_DIV, TEST_CONTROLS)">
	<div id="TEST_DIV" style="padding-left:10px; padding-right:10px; width:100%; height:90%; position:relative">
		<h4>Explore mouse APIs</h4>
		<div id="TEST_CONTROLS">
			<table>
				<tr>
					<td><button class="btn btn-sm btn-success" style="width:100%" onclick="sideSuffix='creojs'; CreoJS.uiMsgDisplayCreoJS()">UI MessageDisplay (Creo.JS)</button></td>
					<td><button class="btn btn-sm btn-danger" style="width:100%" onclick="sideSuffix='weblink'; uiMsgDisplay()">UI MessageDisplay (Web.Link)</button></td>
				</tr>
				<tr>
					<td><button class="btn btn-sm btn-success" style="width:100%" onclick="sideSuffix='creojs'; CreoJS.uiPickMouseBoxCreoJS().subscribe(printUIMouseBox)">UI PickMouseBox (Creo.JS)</button></td>
					<td><button class="btn btn-sm btn-danger" style="width:100%" onclick="sideSuffix='weblink'; uiPickMouseBox()">UI PickMouseBox (Web.Link)</button></td>
				</tr>
				<tr>
					<td><button class="btn btn-sm btn-success" style="width:100%" onclick="sideSuffix='creojs'; CreoJS.uiNextMousePickCreoJS().subscribe(printUIMousePosition)">UI NextMousePick (Creo.JS)</button></td>
					<td><button class="btn btn-sm btn-danger" style="width:100%" onclick="sideSuffix='weblink'; uiNextMousePick()">UI NextMousePick (Web.Link)</button></td>
				</tr>
				<tr>
					<td><button class="btn btn-sm btn-success" style="width:100%" onclick="sideSuffix='creojs'; CreoJS.uiCurrentMouseStatusCreoJS().subscribe(printUIMousePosition)">UI CurrentMouseStatus (Creo.JS)</button></td>
					<td><button class="btn btn-sm btn-danger" style="width:100%" onclick="sideSuffix='weblink'; uiCurrentMouseStatus()">UI CurrentMouseStatus (Web.Link)</button></td>
				</tr>
			</table>
		</div>
	</div>                    
</body>
