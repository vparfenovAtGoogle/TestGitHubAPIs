<head>

<link rel="stylesheet" href="creo.ui.min.css">
    
<script src="creojs.js"></script>
<script type="text/creojs" src="browser.creojs"></script>

<script>

	function arrayToTableRow(arr) {
		var html = ''
		for (var i=0; i<arr.length; i++) html += '<td style="padding:5px">' + arr [i] + '</td>'
		return '<tr>' + html + '</tr>'
	}
	
	function printUIMouseBox(obj) {
		var timep = document.getElementById('output' + sideSuffix);
		if (timep) {
			if (obj != null) {
				var html = ''
				for(var i =0; i < 2; i++){
					html += arrayToTableRow (obj[i])
				}
				timep.innerHTML = 'UIMouseBox in CreoJs: <table>' + html + '</table></pre>'
			}
			else {
				timep.innerHTML ='UIMouseBox obj is null'
			}
		}
	}
	
	function printUIMousePosition(obj) {
		var timep = document.getElementById('output' + sideSuffix);
		if(timep){
			if(obj != null){
				timep.innerHTML ='UIMouseLocation in creoJs: <table>' + arrayToTableRow (obj) + '</table>'
			}
			else {
				timep.innerHTML ='UIMouseLocation obj is null'
			}
		}
	}
</script>

<script type="text/creojs" id="uiActions.js">
	
	function uiMsgDisplayCreoJS(){
		var session = pfcGetCurrentSession ();	
		session.UIDisplayMessage("lights_example_msg.txt", "USER Too many lights", null);
		session.UIClearMessage();
		session.UIDisplayMessage("lights_example_msg.txt", "USER Try to delete", null);
		session.UIClearMessage();				
	} 
	
	function uiPickMouseBoxCreoJS(){
	
		let session = pfcGetCurrentSession();
		var loc = new pfcPoint3D (200., 200.0, 0.0)
		
		const box = session.UIPickMouseBox(loc);
		if (box) {
			const start = box.get(0)
			const end = box.get(1)
			return [[start.x,start.y,start.z], [end.x,end.y,end.x]]
		}
		return null
	}	
	
	function uiNextMousePickCreoJS()
	{
		let session = pfcGetCurrentSession();
		let uiInput = pfcMouseButton.MOUSE_BTN_LEFT;
		let mouse = session.UIGetNextMousePick(uiInput);
		const pos = mouse.Position
		return [pos.x, pos.y, pos.z];
	}
	
	function uiCurrentMouseStatusCreoJS()
	{
		let session = pfcGetCurrentSession();
		let mouse = session.UIGetCurrentMouseStatus(false);
		const pos = mouse.Position
		return [pos.x, pos.y, pos.z];
	}
</script>

</head>

<body>
    <div style="padding:20px">
		<table>
			<tr border="1">
				<th colspan="4" scope="row">
					<span style="position:relative;float:right;align:right">
						<input type=checkbox id=creojsdebug>Debug
						<button class="btn btn-sm btn-primary" onClick="clearOutput()">Clear</button>
						<button class="btn btn-sm btn-primary" onClick="window.location.reload (true)">Reload</button>
					</span>
				</th>
			</tr>
			<tr width="100%" align="left">
				<th colspan="2" >CreoJS</th>
				<th colspan="2" >Creo Web.link</th>
			</tr>
			<tr>
				<td width="77">
				<tr>
					<td>
						&nbsp;&nbsp;
						&nbsp;&nbsp;
					</td>
				</tr>	
			<tr>
                  <td scope="row" class="IconButtons"><input type="submit" name="msgDisplayCreoJS" id="msgDisplayCreoJS" value="UI MessageDisplay" onclick="CreoJS.uiMsgDisplayCreoJS()">
                  <td width="281" rowspan="6" id="creoJSinfoDisplay" name="creoJSinfoDisplay" value="">&nbsp;</td>
                  <td class="IconButtons" scope="row"><input type="submit" name="msgDisplayWeblink" id="msgDisplayWeblink" value="UI MessageDisplay" onclick="uiMsgDisplay()"></td>
                  <td width="336" rowspan="6" id="creoWeblinkinfoDisplay" name="creoWeblinkinfoDisplay" value="">&nbsp;</td>
			</tr>
			<tr>
                  <td scope="row" class="IconButtons"><input type="submit" name="pickMouseBoxCreoJS" id="pickMouseBoxCreoJS2" value="UI PickMouseBox" onclick="sideSuffix = 'creojs'; CreoJS.uiPickMouseBoxCreoJS().subscribe(printUIMouseBox)">              
                  <td class="IconButtons" scope="row"><input type="submit" name="pickMouseBoxWeblink" id="pickMouseBoxWeblink" value="UI PickMouseBox" onclick="uiPickMouseBox()"></td>
			</tr>
			<tr>
                  <td scope="row" class="IconButtons"><input type="submit" name="nextMousePickCreoJS" id="nextMousePickCreoJS" value="UI NextMousePick" onclick="sideSuffix = 'creojs'; CreoJS.uiNextMousePickCreoJS().subscribe(printUIMousePosition)">                  
                  <td class="IconButtons" scope="row"><input type="submit" name="nextMousePickWeblink" id="nextMousePickWeblink" value="UI NextMousePick" onclick="uiNextMousePick()"></td>
            </tr>
            <tr>
					<td scope="row" class="IconButtons"><input type="submit" name="CurrentMouseStatusCreoJS" id="CurrentMouseStatusCreoJS" value="UI CurrentMouseStatus" onclick="sideSuffix = 'creojs'; CreoJS.uiCurrentMouseStatusCreoJS().subscribe(printUIMousePosition)">                    
					<td width="64" class="IconButtons" scope="row"><input type="submit" name="CurrentMouseStatusWeblink" id="CurrentMouseStatusWeblink" value="UI CurrentMouseStatus" onclick="uiCurrentMouseStatus()"></td> 
		    </tr>				 	 		
			</td>
			</td>
			</tr>
		</table>		
    </div>
    <div style="padding-left:10px; padding-right:10px; width:100%; height:90%; position:relative">
        <table width="78%" style="width:100%; ">
            <tr>
                <td width="30%" style="width:50%; vertical-align:top">
                    <p id="elapsedtimecreojs"><p>
                    <span id="jsoncreojs"></span>
                    <ul id="messagescreojs"></ul>
                    <div id="outputcreojs" style="width:100%; height:100%; position:relative"></div>
                </td>
                <td width="70%" style="width:50%; vertical-align:top">
                    <p id="elapsedtimeweblink"><p>
                    <span id="jsonweblink"></span>
                    <ul id="messagesweblink"></ul>
                    <div id="outputweblink" style="width:100%; height:100%; position:relative"></div>
                </td>
            </tr>
        </table>
    </div>                    
</body>