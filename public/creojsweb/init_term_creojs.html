<html>
<head>
    <title>Test Creo.JS load/unload mechanism</title>

    <script src="creojs.js"></script>
    <creojs src="browser.creojs"></creojs>

    <creojs id="load_unload.js">
        let sessionGUID = null;
        CreoJS.onload = () => Browser.alert ('Initialized Creo.JS Engine')
        CreoJS.onunload = () => Browser.alert ('unloaded page with id ' + sessionGUID)
        function onLoad (id) {
            sessionGUID = id;
            Browser.alert ('loaded page with id ' + sessionGUID)
        }
        undefined
    </creojs>

    <script>
        function oninit () {
            document.getElementById ('pageid').innerHTML = CreoJS.$GUID
            CreoJS.$ADD_ON_LOAD (function () {CreoJS.onLoad (CreoJS.$GUID)})
        }
    </script>

</head>

<body onload="oninit ()">
    <p><b>Page id: </b><span id=pageid></span></p>
    <p>Reload page to see unload alert</p>
</body>
</html>